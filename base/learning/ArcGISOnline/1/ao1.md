# ArcGIS onlineを用いたWeb地図の作成
この資料では、ArcGIS onlineでWeb地図を作成し、公開する手法について解説します。ここで作成するWeb地図は、ベースマップの上にポイントデータが配置されているもので、各ポイントをクリックすると写真が表示されるようなものを想定しています。この実習には、ArcGIS onlineのアカウントやその各種機能がアクティブになっている必要があります。実習を開始する前に、下記のデータを入手してください。

[実習用データ](https://github.com/yamauchi-inochu/homepage/learning/raw/main/data/ao-1.zip)
>　本データは、立命館大学アートリサーチセンターにて、公開されている。ARC景観型写真ポータルデータベースから作成しました。

## ベース地図の作成
所属組織などのArcGIS online にアクセスし、自身のアカウントでログインする。`マップ`をクリックして、新規地図（無題のマップ）を開く。
![img](./img/ao1-1.png)

実習用データをエクセルなどで開き、ファイルの構成を確認したのち、次の工程へ進む。

`追加＞ファイルからレイヤーを追加＞お使いのデバイス`を選択し、実習用データを読み込む。
![img](./img/ao1-2.png)

各列に適したデータ型を設定し、GISデータとなる際の属性情報を整えていく。
![img](./img/ao1-3.png)

位置情報の設定から、`緯度と経度`を選択し、以下のように緯度と経度のフィールドを指定する。
![img](./img/ao1-4.png)

レイヤーの名称を`タイトル`に入力し、`作成してマップに追加`をクリックする。
![img](./img/ao1-5.png)

以下のように、マップに作成したレイヤーが追加されたことを確認し、`レイヤスタイルの編集`からレイヤーの見せ方を変え、地図を調整していく。
![img](./img/ao1-6.png)

`スタイルオプション`からシンボルスタイルをよりシンプルなものに変え、完了をクリックする。
![img](./img/ao1-7.png)

ポイントをクリックして写真が表示されるようにしたいため、次のように設定をする。
![img](./img/ao1-8.png)

1. アイコンをクリックする
2. `ポップアップの有効化`をオンにする
3. `コンテンツの追加`をクリックする
4. `画像`をクリックする

`URL`に画像のURLをもつフィールド名（列名）を`{photourl}`のように追加し、完了をクリックする。地図画面にもどり、ポイントをクリックしたら写真が表示されるかを確認する。
![img](./img/ao1-9.png)

フォルダーマークのアイコンをクリックし、`名前を付けて保存`を選択する。`マップの保存`から地図の`タイトル`を指定して、`保存`をクリックする。
![img](./img/ao1-10.png)

## 公開用地図アプリの設定
以下のアイコンをクリックし、`Instant Apps`を選択する。Instant Appsのウィンドウで、ベーシックを探し、`選択`をクリックする。
![img](./img/ao1-11.png)

`アプリのタイトル`を入力し、`アプリの作成`をクリックする。
![img](./img/ao1-12.png)

以下の２枚の説明図を参考に、地図を公開するために、`公開 > 確認`をクリックし、`共有設定`を確認する。共有設定は、ここでは、`すべての人に公開`とし`共有の更新`をした。`リンクのコピー`をしてから
![img](./img/ao1-13.png)

![img](./img/ao1-14.png)

コピーしたリンクをwebブラウザで入力し、地図が公開されているかを確認する。
![img](./img/ao1-15.png)





